{% load static %}
<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>

<!doctype html>
<html lang="es">

<head>
  <title>Blog Tecno</title>

  <!-- Required meta tags -->
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="">

  <!-- Custom CSS -->
  <link href={% static 'blog/css/bootstrap.min.css' %} rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href={% static 'blog/css/blog.css' %} rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" >

</head>

<body>
  <section class="container">

    <header class="d-flex flex-wrap justify-content-between py-3 mb-4 border-bottom">

      <section class="dropdown">
        <a href={% url 'apps.blog:inicio' %} class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-dark text-decoration-none">
          <img class="bi me-2" width="95" height="95" src={% static 'blog/img/robot_logo2.jpg' %}>
          <section class="d-flex flex-column align-items-center justify-content-start" style="background-color: #ececec; font-weight:500;">
            <span class="text-center" style="width:10rem; font-size:0.85rem; letter-spacing:0.55rem;">NOTICIAS</span>
            <span class="fs-2 text-center border-top border-bottom border-primary border-1" style="width:8rem; font-weight:700;letter-spacing:0.15rem;">BLOG</span>
            <span class="text-center" style="width:10rem; font-size:0.85rem; letter-spacing:0.35rem;">ROBOTICAS</span>
          </section>
        </a>
      </section>

      {%if request.user.is_authenticated %}

          <section class="d-flex flex-row flex-shrink-0 dropdown">
            
            <section
                class="text-bg-dark pt-3 ps-3 pe-4 border"
                style="font-weight:700; height:3.4375rem; clip-path: polygon(100% 0%, 90% 50%, 100% 100%, 15% 100%, 0% 50%, 15% 0%);">
              <span>{{ request.user.username | title }}</span>
            </section>

            <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown"
              aria-expanded="false">
              {% if  request.user.is_superuser %}
                <img src={% static 'blog/img/user_admin.webp' %} alt="mdo" width="55" height="55" class="rounded-circle">
              {% elif request.user.is_staff %}
                <img src={% static 'blog/img/user_staff.webp' %} alt="mdo" width="55" height="55" class="rounded-circle">
              {% else %}
                <img src={% static 'blog/img/user_user.png' %} alt="mdo" width="55" height="55" class="rounded-circle">
              {% endif %}
            </a>

            <ul class="dropdown-menu text-small shadow">

              {% if request.user.is_staff %}
                <li><a class="dropdown-item" href={% url 'apps.blog:crear_articulo' %}>Crear Artículo</a></li>
              {% endif %}

              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href={% url 'logout' %}>Salir</a></li>

            </ul>
          </section>

      {% else %}

        <section class="flex-shrink-0 dropdown">
          <a href="#" class="d-block link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown"
            aria-expanded="false">
            <span>MENU</span>
          </a>
          <ul class="dropdown-menu text-small shadow">
              <li><a class="dropdown-item" href={% url 'login' %}>Login</a></li>
              <li><a class="dropdown-item" href={% url 'apps.blog:signup' %}>Registrarse</a></li>
          </ul>
        </section>

      {% endif %}
    </header>

    <main class="mt-2">

      <section class="row g-5">
        <!-- TODOS LOS POSTS -->
        <section class="col-md-9">
          {% block contenido %}

          {% endblock contenido %}
        </section>

        <!-- ASIDE -->
        <aside class="col-md-3">
          <section class="position-sticky" style="top: 2rem;">

            <article class="p-4 mb-3 bg-light rounded">
              <h4 class="fst-italic text-center">Acerca de nosotros</h4>
              <p class="mb-0 text-justify">{{ acerca }}</p>
            </article>

            <article class="p-4 text-center">
              <h4 class="fst-italic">Categorías</h4>
              <ol class="list-unstyled mb-0">
                {% for categoria in categorias %}
                <li><a class="text-decoration-none" href= {% url 'apps.blog:categoria' categoria_slug=categoria.slug%} >{{ categoria }}</a></li>
                {% endfor %}
              </ol>
            </article>

            <article class="p-4 text-center">
              <h4 class="fst-italic">Archivos</h4>
              <ol class="list-unstyled mb-0">
                {% for archivo in archivos %}
                <li><a class="text-decoration-none" href= {% url 'apps.blog:archivo' year=archivo.fecha.year month=archivo.fecha.month %} >{{ archivo.fecha|date:'F Y'|capfirst }}</a></li>
                {% endfor %}
              </ol>
            </article>

            <article class="p-4 text-center">
              <h4 class="fst-italic">Nuestras redes</h4>
              <ol class="list-unstyled">
                {% for red in redes %}
                 {% if red.url %}
                    <li><a class="text-decoration-none" href={{ red.url }} target="_blank"><i class="{{red.icono}}"></i>  {{red}}</a></li>
                  {% endif %}
                {% endfor %}
              </ol>
            </article>

            <article class="p-4 text-center">
              <h4 class="fst-italic">Contacto</h4>
              <a class="text-decoration-none" href= {% url 'apps.contacto:contacto' %}>
                <i class="bi bi-envelope-at-fill"></i>
                Envía tu consulta
              </a>
            </article>

          </section>
        </aside>
      </section>
    </main>
    <script src={% static 'blog/js/bootstrap.bundle.min.js' %}></script>

    <footer class="blog-footer">
      <p>BLOG Noticias Robóticas - Derechos reservados © 2023</p>
      <p><a href="#"><i class="bi bi-arrow-bar-up text-dark"></i></a></p>
    </footer>
  </section>
</body>

</html>